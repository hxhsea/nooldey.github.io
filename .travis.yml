language: node_js
node_js: stable

# Travis-CI Caching
cache:
  directories:
    - node_modules

#Build cycle
install:
  - npm install -g hexo
  - npm install -g hexo-cli
  - npm install

before_script:
  - git config --global user.name "nooldey"
  - git config --global user.email 'openzws@163.com'
  
script:
  - hexo clean
  - hexo generate

after_success:
  - cd public
  - git init
  - git add .
  - git commit -m 'Update from travis"
  - git push -f "https://${GH_TOKEN}@${GH_REF}" master:master
#Build cycle end

branches:
  only:
    - source
env:
 global:
   - GH_REF: github.com/nooldey/nooldey.github.io.git
   - secure: "xsr+qD8r1GfkFveT9CjrL3g+Yvi79YcxVW+hDolqD2nmzh88b22Ha9koL6Ib7beU6Ho6TB+UAhmUjrnnwOcDtYaWDH25es+LvsQKq3DHJavYNN4m269rS20VAYsAq9N89YDttqzcktq0WO2Mmm4sKVmlqqTkUATr0ViV3icdnK+IUqLaJJMT+2Rg2hrrI9U8P2HwmaBwRaXQmGQfqNlbdjIGOy467r2bEnEWuYsXwK8/Wum3ZT6bVyjkttNxtCMaJ7kHQBxSXPfP60MErNNSui44YMh+X2wQBFCnCRCs/AmRm4hxv9eyRnYQQ31tD2Kx+Rl9syWh646xd2TQxHMwuarJTK5v0ot+x4nnQM2MhRV4QygokAkMRcO1PHfTYydzAD6gSEgZosisReqmhEeyzOhMekr/itf6k2BEIXqrxICzjwP52guw6lhMHefBgWorjzDJMc4Kov2iHm91ydqz/p0vhdZFRyHoIIn5QH6rm8ooW8WPpsodgxW09biTUo2bhdqq2XkrIFg6MK8AQXTha63FXD7d3R/XXojk8fBidTtZ+MUti9mKV0brqLm4U+lfQt67kYz1YKtL1T7558Ub/KyZY13xO7zFwP+iAKMzx9kLVQhqUZeTlCghGVjPNkNvA7zRD93q38vpLViEAWswNVeWVntbElP7mR+ApxmXEuo="
